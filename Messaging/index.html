<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <meta
    name="viewport"
    content="width=device-width, user-scalable=no,
		shrink-to-fit=no, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"
  />
  <title>Publisher</title>
  <style>
    @import 'ui/css/evothings-app.css';
  </style>
  <script>
    // Redirect console.log to Evothings Workbench.
    if (window.hyper && window.hyper.log) { console.log = hyper.log }
  </script>
</head>

<body ontouchstart="">
  <!-- ontouchstart="" enables low-delay CSS transitions. -->
  <p id=”heading”>Everybody say wheyo</p>
  <button onclick="pub()">Publish stuff!</button>
  <script src="https://cdn.pubnub.com/sdk/javascript/pubnub.4.21.7.js"></script>
  <!-- Instantiate PubNub -->
  <script type="text/javascript">
    var pubnubDemo = new PubNub({
      publishKey: 'pub-c-7ce57a07-f9d2-4baf-8a7b-e57c2d361c54',
      subscribeKey: 'sub-c-e9db0d3e-70bb-11e9-a1d6-2a8c316da507'
    });
    function pub() {
      // Publish a simple message to the “demo_tutorial” channel pubnub:
      pubnubDemo.publish({ message: { "color": "blue" }, channel: 'demo_tutorial' });
    }


  </script>
  <script>
    // Get event data
    function deviceOrientationListener(event) {
      var alpha = event.alpha; //z axis rotation [0,360)
      var beta = event.beta; //x axis rotation [-180, 180]
      var gamma = event.gamma; //y axis rotation [-90, 90]


      //Check if absolute values have been sent
      if (typeof event.webkitCompassHeading !== "undefined") {
        alpha = event.webkitCompassHeading; //for iOS devices
        var heading = alpha
        document.getElementById("heading").innerHTML = heading.toFixed([0]);
      }
      else {
        alert("Your device is reporting relative alpha values, so this compass won't point north :(");
        var heading = 360 - alpha; //heading [0, 360)
        document.getElementById("heading").innerHTML = heading.toFixed([0]);
      }

    } 
  </script>
</body>

</html>